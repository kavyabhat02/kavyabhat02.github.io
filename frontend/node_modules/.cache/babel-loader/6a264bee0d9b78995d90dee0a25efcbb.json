{"ast":null,"code":"import _defineProperty from\"/home/kavya/Desktop/kavyabhat02.github.io/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/home/kavya/Desktop/kavyabhat02.github.io/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/kavya/Desktop/kavyabhat02.github.io/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import\"./styles/SignupForm.css\";import qs from'qs';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var initialForm=Object.freeze({username:\"\",password:\"\"});var SignupForm=function SignupForm(){var _useState=useState(initialForm),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],updateFormData=_useState2[1];//console.log(formData);\nvar _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),username=_useState4[0],setUsername=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),signup=_useState8[0],signupForm=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),signupMessage=_useState10[0],setSignupMessage=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),user=_useState12[0],setUser=_useState12[1];useEffect(function(){var signedInUser=localStorage.getItem(\"user\");if(signedInUser){var foundUser=signedInUser;setUser(foundUser);}},[]);var handleChange=function handleChange(e){updateFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},e.target.name,e.target.value.trim())));};var handleSignout=function handleSignout(){setUser({});setUsername(\"\");setPassword(\"\");localStorage.clear();window.location.reload();};var submitResponse=function submitResponse(e){e.preventDefault();axios.post(\"http://localhost:8000/api/auth/register/\",qs.stringify(formData),{headers:{\"Content-Type\":\"application/x-www-form-urlencoded\"},formData:qs.stringify(formData)}).then(function(resp){if(resp.status===201){console.log(\"Signed up successfully\");}else if(resp.status===401){console.log(\"Signup failed\");}setSignupMessage(resp.data.message);setUser(resp.data);// store the user in localStorage\nlocalStorage.setItem('user',resp.data);});};var validateForm=function validateForm(){return signup!=null;};if(user){var loggedIn=localStorage.getItem('user');return/*#__PURE__*/_jsxs(\"div\",{className:\"SignupForm\",style:{color:\"white\"},children:[/*#__PURE__*/_jsx(\"p\",{children:\"Welcome!\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSignout,children:\"Sign Out\"})]});}return/*#__PURE__*/_jsx(\"div\",{className:\"SignupForm\",style:{color:\"white\"},children:/*#__PURE__*/_jsxs(\"form\",{children:[\"Username:\",/*#__PURE__*/_jsx(\"input\",{name:\"username\",required:true,onChange:handleChange}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),\"Password:\",/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",required:true,onChange:handleChange}),/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:submitResponse,children:\"Signup\"})]})});};export default SignupForm;","map":{"version":3,"sources":["/home/kavya/Desktop/kavyabhat02.github.io/frontend/src/components/SignupForm.jsx"],"names":["React","useState","useEffect","axios","qs","initialForm","Object","freeze","username","password","SignupForm","formData","updateFormData","setUsername","setPassword","signup","signupForm","signupMessage","setSignupMessage","user","setUser","signedInUser","localStorage","getItem","foundUser","handleChange","e","target","name","value","trim","handleSignout","clear","window","location","reload","submitResponse","preventDefault","post","stringify","headers","then","resp","status","console","log","data","message","setItem","validateForm","loggedIn","color"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport \"./styles/SignupForm.css\";\nimport qs from 'qs'\n\nconst initialForm = Object.freeze({\n  username:\"\",\n  password:\"\"\n});\n\nconst SignupForm = () => {\n  const [formData, updateFormData] = useState(initialForm);\n  //console.log(formData);\n\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [signup, signupForm] = useState();\n  const [signupMessage, setSignupMessage] = useState();\n  const [user, setUser] = useState();\n  \n  useEffect(() => {\n    const signedInUser = localStorage.getItem(\"user\");\n    if (signedInUser) {\n      const foundUser = signedInUser;\n      setUser(foundUser);\n    }\n  }, []);\n\n  const handleChange = (e) => {\n\n    updateFormData({\n      ...formData, \n      [e.target.name]: e.target.value.trim()\n    });\n  };\n\n  const handleSignout = () => {\n    setUser({});\n    setUsername(\"\");\n    setPassword(\"\");\n    localStorage.clear();\n    window.location.reload();\n  };\n\n  const submitResponse = (e) => {\n    e.preventDefault();\n    \n\n    axios\n      .post(\"http://localhost:8000/api/auth/register/\", qs.stringify(formData), {\n        headers: {\n          \"Content-Type\": \"application/x-www-form-urlencoded\",\n        },\n        formData: qs.stringify(formData),\n      })\n      .then((resp) => {\n        if (resp.status === 201) {\n          console.log(\"Signed up successfully\");\n        }\n        else if (resp.status === 401) {\n          console.log(\"Signup failed\");\n        }\n        setSignupMessage(resp.data.message);\n        setUser(resp.data);\n        // store the user in localStorage\n        localStorage.setItem('user', resp.data);\n\n      });\n\n      \n  }; \n \n  const validateForm = () => {\n    return signup != null;\n  };\n\n  if (user) {\n    const loggedIn = localStorage.getItem('user');\n    return (\n      <div className=\"SignupForm\" style={{color: \"white\"}}>\n        <p>Welcome!</p>\n        <button onClick={handleSignout}>Sign Out</button>\n      </div>\n    );\n}\n\nreturn (\n  <div className=\"SignupForm\" style={{color: \"white\"}}>\n    <form>\n      Username: \n      <input name=\"username\" required onChange={handleChange}></input> <br/><br/>\n      Password:\n      <input type=\"password\" name=\"password\" required onChange={handleChange}\n      ></input>\n      <br /> <br />\n      <button onClick={submitResponse}>\n        Signup\n      </button>\n    </form>\n  </div>\n);\n};\n\nexport default SignupForm;\n"]},"metadata":{},"sourceType":"module"}