{"ast":null,"code":"import _defineProperty from\"/home/kavya/Desktop/kavyabhat02.github.io/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/home/kavya/Desktop/kavyabhat02.github.io/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/kavya/Desktop/kavyabhat02.github.io/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import\"./styles/LoginForm.css\";import qs from'qs';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var initialForm=Object.freeze({username:\"\",password:\"\"});var LoginForm=function LoginForm(){var _useState=useState(initialForm),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],updateFormData=_useState2[1];//console.log(formData);\nvar _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),username=_useState4[0],setUsername=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),login=_useState8[0],loginForm=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),loginMessage=_useState10[0],setLoginMessage=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),user=_useState12[0],setUser=_useState12[1];useEffect(function(){var loggedInUser=localStorage.getItem(\"user\");if(loggedInUser){var foundUser=loggedInUser;setUser(foundUser);}},[]);var handleChange=function handleChange(e){updateFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},e.target.name,e.target.value.trim())));};// logout the user\nvar handleLogout=function handleLogout(){setUser({});setUsername(\"\");setPassword(\"\");localStorage.clear();window.location.reload();};var submitResponse=function submitResponse(e){e.preventDefault();//const user = {username, password};\naxios.post(\"http://localhost:8000/api/auth/login/\",qs.stringify(formData),{headers:{\"Content-Type\":\"application/x-www-form-urlencoded\"},formData:qs.stringify(formData)}).then(function(resp){if(resp.status===200){console.log(\"Logged in\");}else if(resp.status===401){console.log(\"Login failed\");}setLoginMessage(resp.data.message);setUser(resp.data);// store the user in localStorage\nlocalStorage.setItem('user',JSON.stringify(resp.data));});};var validateForm=function validateForm(){return login!=null;};if(user){var loggedIn=localStorage.getItem('user');return/*#__PURE__*/_jsxs(\"div\",{className:\"LoginForm\",style:{color:\"white\"},children:[/*#__PURE__*/_jsx(\"p\",{children:\"Welcome!\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,children:\"Logout\"})]});}return/*#__PURE__*/_jsx(\"div\",{className:\"LoginForm\",style:{color:\"white\"},children:/*#__PURE__*/_jsxs(\"form\",{children:[\"Username:\",/*#__PURE__*/_jsx(\"input\",{name:\"username\",required:true,onChange:handleChange}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),\"Password:\",/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",required:true,onChange:handleChange}),/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:submitResponse,children:\"Login\"})]})});};export default LoginForm;","map":{"version":3,"sources":["/home/kavya/Desktop/kavyabhat02.github.io/frontend/src/components/LoginForm.jsx"],"names":["React","useState","useEffect","axios","qs","initialForm","Object","freeze","username","password","LoginForm","formData","updateFormData","setUsername","setPassword","login","loginForm","loginMessage","setLoginMessage","user","setUser","loggedInUser","localStorage","getItem","foundUser","handleChange","e","target","name","value","trim","handleLogout","clear","window","location","reload","submitResponse","preventDefault","post","stringify","headers","then","resp","status","console","log","data","message","setItem","JSON","validateForm","loggedIn","color"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport \"./styles/LoginForm.css\";\nimport qs from 'qs'\n\nconst initialForm = Object.freeze({\n  username:\"\",\n  password:\"\"\n});\n\nconst LoginForm = () => {\n  const [formData, updateFormData] = useState(initialForm);\n  //console.log(formData);\n\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [login, loginForm] = useState();\n  const [loginMessage, setLoginMessage] = useState();\n  const [user, setUser] = useState();\n\n  useEffect(() => {\n    const loggedInUser = localStorage.getItem(\"user\");\n    if (loggedInUser) {\n      const foundUser = loggedInUser;\n      setUser(foundUser);\n    }\n  }, []);\n  \n  const handleChange = (e) => {\n\n    updateFormData({\n      ...formData, \n      [e.target.name]: e.target.value.trim()\n    });\n  };\n\n  // logout the user\n  const handleLogout = () => {\n    setUser({});\n    setUsername(\"\");\n    setPassword(\"\");\n    localStorage.clear();\n    window.location.reload();\n  };\n\n  const submitResponse = (e) => {\n    e.preventDefault();\n    //const user = {username, password};\n    axios\n      .post(\"http://localhost:8000/api/auth/login/\", qs.stringify(formData), {\n        headers: {\n          \"Content-Type\": \"application/x-www-form-urlencoded\",\n        },\n        formData: qs.stringify(formData),\n      })\n      .then((resp) => {\n        if (resp.status === 200) {\n          console.log(\"Logged in\");\n        }\n        else if (resp.status === 401) {\n          console.log(\"Login failed\");\n        }\n        setLoginMessage(resp.data.message);\n        setUser(resp.data)\n        // store the user in localStorage\n        localStorage.setItem('user', JSON.stringify(resp.data))\n      });\n  }; \n \n  const validateForm = () => {\n    return login != null;\n  };\n\n  if (user) {\n      const loggedIn = localStorage.getItem('user');\n      return (\n        <div className=\"LoginForm\"  style={{color: \"white\"}}>\n          <p>Welcome!</p> \n          <button onClick={handleLogout}>Logout</button>\n        </div>\n      );\n  }\n\n  return (\n    <div className=\"LoginForm\" style={{color: \"white\"}}>\n      <form>\n        Username: \n        <input name=\"username\" required onChange={handleChange}></input> <br/><br/>\n        Password:\n        <input type=\"password\" name=\"password\" required onChange={handleChange}\n        ></input>\n        <br /> <br />\n        <button onClick={submitResponse}>\n          Login\n        </button>\n      </form>\n    </div>\n  );\n};\n\nexport default LoginForm;\n"]},"metadata":{},"sourceType":"module"}